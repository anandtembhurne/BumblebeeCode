var nuxeo=nuxeo||{};nuxeo.utils=function(e){function n(e){for(var n in s)s.hasOwnProperty(n)&&s[n].call(null,e)}function t(e,t){n({status:"begin",flag:t}),e(),n({status:"success",flag:t})}var s=[],r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return e.escapeHTML=function(e){return String(e).replace(/[&<>"'\/]/g,function(e){return r[e]})},e.addOnEvent=function(e){if("function"!=typeof e)throw new Error("nuxeo.utils.addOnEvent: Added a callback that was not a function");s[s.length]=e},e.moreLessTableRows=function(e,n,t){var s=jQuery("[id$='"+e+"']"),r=jQuery("[id$='"+e+"'] tr"),i=s.parent().find(".nx-more"),o=s.parent().find(".nx-less");if(r.length<=t)return i.css("display","none"),void o.css("display","none");var u=s.find("tr:gt("+(t-1)+")");n?(i.css("display","none"),o.css("display",""),u.css("display","")):(o.css("display","none"),i.css("display",""),u.css("display","none"))},e.select2ifySelect=function(e,n){jQuery(document.getElementById(e)).select2(n)},e.addFromListTemplate=function(e,n){return t(function(){var t=jQuery(n),s=n.siblings(".listItem").length,r=jQuery("<div/>").html(t.html()).text().trim(),i=new RegExp(e+":TEMPLATE_INDEX_MARKER:rowIndex","g");r=r.replace(i,e+":rowIndex"),i=new RegExp(e+":TEMPLATE_INDEX_MARKER","g"),r=r.replace(i,e+":"+s);var o=jQuery.parseHTML(r,document,!0);jQuery(o).find("input[value='TEMPLATE_INDEX_MARKER']").val(s),t.before(o)},"js-list-add"),!1},e.deleteFromList=function(e){return t(function(){e.remove()},"js-list-delete"),!1},e.moveUpList=function(e){return t(function(){e.insertBefore(e.prev())},"js-list-move-up"),!1},e.moveDownList=function(e){return t(function(){e.insertAfter(e.next())},"js-list-move-down"),!1},e}(nuxeo.utils||{});